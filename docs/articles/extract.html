<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Extract data from a yspec object • yspec</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Extract data from a yspec object">
<meta property="og:description" content="yspec">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">yspec</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/yspec.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/reference.html">Yaml specification reference</a>
    </li>
    <li>
      <a href="../articles/analysis1.html">Example yaml specification file</a>
    </li>
    <li>
      <a href="../articles/lookup.html">Using lookup files</a>
    </li>
    <li>
      <a href="../articles/ysdb_internal.html">yspec internal data base</a>
    </li>
    <li>
      <a href="../articles/project.html">Project objects</a>
    </li>
    <li>
      <a href="../articles/label.html">Label the columns in a data set</a>
    </li>
    <li>
      <a href="../articles/extract.html">Extract data from a yspec object</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Extract data from a yspec object</h1>
            
            <h4 class="date">2020-06-19</h4>
      
      
      <div class="hidden name"><code>extract.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>This vignette shows you how to extract information from a yspec object.</p>
</div>
<div id="set-up" class="section level1">
<h1 class="hasAnchor">
<a href="#set-up" class="anchor"></a>Set up</h1>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="no"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html">opts_chunk</a></span>$<span class="fu">set</span>(<span class="kw">comment</span> <span class="kw">=</span> <span class="st">'.'</span>)</pre></body></html></div>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidyverse</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">yspec</span>)</pre></body></html></div>
</div>
<div id="basic" class="section level1">
<h1 class="hasAnchor">
<a href="#basic" class="anchor"></a>Basic</h1>
<p>First, recall that the yspec object is just a list. We can use map to get information out of that list. For example, to find the types of all the columns in the data set use <code>purrr:::map</code></p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">spec</span> <span class="kw">&lt;-</span> <span class="no">ys_help</span>$<span class="fu"><a href="https://rdrr.io/r/stats/spectrum.html">spec</a></span>()

<span class="fu">map</span>(<span class="no">spec</span>, <span class="st">"type"</span>)[<span class="fl">1</span>:<span class="fl">5</span>]</pre></body></html></div>
<pre><code>. $C
. [1] "character"
. 
. $NUM
. [1] "numeric"
. 
. $ID
. [1] "numeric"
. 
. $SUBJ
. [1] "character"
. 
. $TIME
. [1] "numeric"</code></pre>
<p>If we wanted some column information in csv format we could also do</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu">map</span>(<span class="no">spec</span>, ~ <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="no">.x</span><span class="kw">[[</span><span class="st">"col"</span>]],<span class="no">.x</span><span class="kw">[[</span><span class="st">"short"</span>]],<span class="no">.x</span><span class="kw">[[</span><span class="st">"type"</span>]],<span class="kw">sep</span><span class="kw">=</span><span class="st">','</span>))[<span class="fl">1</span>:<span class="fl">3</span>]</pre></body></html></div>
<pre><code>. $C
. [1] "C,comment character,character"
. 
. $NUM
. [1] "NUM,record number,numeric"
. 
. $ID
. [1] "ID,subject identifier,numeric"</code></pre>
<p>There are other helper functions that do more than just pull a field. We can extract a label and form a unit.</p>
</div>
<div id="get-units" class="section level1">
<h1 class="hasAnchor">
<a href="#get-units" class="anchor"></a>Get units</h1>
<p>Call <code>ys_get_unit</code> to get a named list of units. When the <code>parens</code> argument is true, it will put parentheses around the unit. Notice that the output here is different than if we were to only map across the list and ask for the unit field. Many columns don’t have units and we’d get <code>NULL</code> back if we just mapped. The <code>ys_get_unit</code> function subs in blank character data items when <code>unit</code> is <code>NULL</code>.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu"><a href="../reference/ys_get_unit.html">ys_get_unit</a></span>(<span class="no">spec</span>, <span class="kw">parens</span> <span class="kw">=</span> <span class="fl">TRUE</span>) <span class="kw">%&gt;%</span> <span class="no">unlist</span></pre></body></html></div>
<pre><code>.            C          NUM           ID         SUBJ         TIME          SEQ 
.           ""           ""           ""           ""     "(hour)"           "" 
.          CMT         EVID          AMT           DV          AGE           WT 
.           ""           ""       "(mg)" "(&lt;&lt;mugL&gt;&gt;)"    "(years)"       "(kg)" 
.         CRCL          ALB          BMI          AAG          SCR          AST 
.   "(ml/min)"     "(g/dL)"    "(m2/kg)"    "(mg/dL)"    "(mg/dL)"           "" 
.          ALT           HT           CP         TAFD          TAD         LDOS 
.           ""       "(cm)"           ""    "(hours)"    "(hours)"       "(mg)" 
.          MDV          BLQ        PHASE        STUDY           RF 
.           ""           ""           ""           ""           ""</code></pre>
</div>
<div id="get-labels" class="section level1">
<h1 class="hasAnchor">
<a href="#get-labels" class="anchor"></a>Get labels</h1>
<p>We can also get labels</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="../reference/ys_get_label.html">ys_get_label</a></span>(<span class="no">spec</span>)[<span class="fl">1</span>:<span class="fl">3</span>]</pre></body></html></div>
<pre><code>. $C
. [1] "comment character"
. 
. $NUM
. [1] "record number"
. 
. $ID
. [1] "subject identifier"</code></pre>
</div>
<div id="get-short" class="section level1">
<h1 class="hasAnchor">
<a href="#get-short" class="anchor"></a>Get short</h1>
<p>We can also get the short name</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="../reference/ys_get_short.html">ys_get_short</a></span>(<span class="no">spec</span>)[<span class="fl">1</span>:<span class="fl">3</span>]</pre></body></html></div>
<pre><code>. $C
. [1] "comment character"
. 
. $NUM
. [1] "record number"
. 
. $ID
. [1] "subject identifier"</code></pre>
</div>
<div id="get-short-with-unit" class="section level1">
<h1 class="hasAnchor">
<a href="#get-short-with-unit" class="anchor"></a>Get short with unit</h1>
<p>This function returns a string with both the <code>unit</code> and <code>short</code></p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="fu"><a href="../reference/ys_get_short_unit.html">ys_get_short_unit</a></span>(<span class="no">spec</span>, <span class="kw">parens</span> <span class="kw">=</span> <span class="fl">TRUE</span>)[<span class="fl">1</span>:<span class="fl">5</span>] <span class="kw">%&gt;%</span> <span class="no">as.list</span></pre></body></html></div>
<pre><code>. $C
. [1] "comment character"
. 
. $NUM
. [1] "record number"
. 
. $ID
. [1] "subject identifier"
. 
. $SUBJ
. [1] "subject identifier"
. 
. $TIME
. [1] "TIME (hour)"</code></pre>
</div>
<div id="meta-information" class="section level1">
<h1 class="hasAnchor">
<a href="#meta-information" class="anchor"></a>Meta information</h1>
<p>The information you entered in <code>SETUP__</code> as well as other meta information is stored as a list in the <code>meta</code> attribute of the <code>yspec</code> list. It can be accessed with <code>get_meta</code>. This returns a list with the various pieces of meta data.</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="fu"><a href="../reference/get_meta.html">get_meta</a></span>(<span class="no">spec</span>)[<span class="fl">1</span>:<span class="fl">3</span>]</pre></body></html></div>
<pre><code>. $description
. [1] "Example PopPK analysis data set."
. 
. $sponsor
. [1] "example-project"
. 
. $projectnumber
. [1] "examp101F"</code></pre>
<p>You an pull a single piece of meta data with</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="fu"><a href="../reference/pull_meta.html">pull_meta</a></span>(<span class="no">spec</span>, <span class="st">"projectnumber"</span>)</pre></body></html></div>
<pre><code>. [1] "examp101F"</code></pre>
<div id="what-is-in-the-meta-data" class="section level2">
<h2 class="hasAnchor">
<a href="#what-is-in-the-meta-data" class="anchor"></a>What is in the meta data?</h2>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="no">m</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_meta.html">get_meta</a></span>(<span class="no">spec</span>)</pre></body></html></div>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">m</span>)</pre></body></html></div>
<pre><code>.  [1] "description"     "sponsor"         "projectnumber"   "use_internal_db"
.  [5] "glue"            "spec_file"       "spec_path"       "name"           
.  [9] "data_stem"       "data_path"       "primary_key"</code></pre>
<p>Some descriptions:</p>
<ol style="list-style-type: decimal">
<li>
<code>spec_file</code>: the yaml source file for the specification information</li>
<li>
<code>spec_path</code>: the directory where the yaml source file is located</li>
<li>
<code>name</code>: the stem of the yaml source file</li>
<li>
<code>data_stem</code>: the stem that is used and it is assumed that data sets will be written using this stem (for example <code>&lt;data_stem&gt;.csv</code> etc).</li>
<li>
<code>data_path</code>: the assumed derived data directory</li>
</ol>
<p>See also <a href="reference.html">reference.html</a> for descriptions of meta fields.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Kyle T Baron.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
